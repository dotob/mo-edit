(function() {
  var app;

  app = angular.module('moedit.App');

  app.config([
    '$stateProvider', '$urlRouterProvider', '$locationProvider', function($stateProvider, $urlRouterProvider, $locationProvider) {
      $stateProvider.state('login', {
        url: "/login",
        templateUrl: 'partials/login.html',
        controller: 'loginController'
      }).state('logout', {
        url: "/logout"
      }).state('edit', {
        url: "/edit/:docid",
        templateUrl: 'partials/edit.html',
        controller: 'editController'
      }).state('list', {
        url: "/list",
        templateUrl: 'partials/list.html',
        controller: 'listController'
      });
      $urlRouterProvider.otherwise('/list');
      return $locationProvider.html5Mode(true);
    }
  ]);

  app.run([
    '$rootScope', '$state', '$log', 'moedit.Auth', function($rootScope, $state, $log, Auth) {
      return $rootScope.$on("$stateChangeStart", function(event, toState, toParams, fromState, fromParams) {
        $rootScope.showFullscreen = toState.name === 'edit';
        $log.info("statechange from: " + fromState.name + " to: " + toState.name + ", showFullscreen: " + $rootScope.showFullscreen);
        return;
        if (toState.name !== 'login') {
          if (!Auth.isLoggedIn()) {
            $log.info("not logged in for that state. goto login.");
            event.preventDefault();
            $state.go('login');
          }
          if (toState.name === 'logout') {
            $log.info("logout and goto login");
            Auth.logout();
            event.preventDefault();
            return $state.go('login');
          }
        }
      });
    }
  ]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLEdBQUE7O0FBQUEsRUFBQSxHQUFBLEdBQU0sT0FBTyxDQUFDLE1BQVIsQ0FBZSxZQUFmLENBQU4sQ0FBQTs7QUFBQSxFQUdBLEdBQUcsQ0FBQyxNQUFKLENBQVc7SUFBQyxnQkFBRCxFQUFtQixvQkFBbkIsRUFBeUMsbUJBQXpDLEVBQThELFNBQUMsY0FBRCxFQUFpQixrQkFBakIsRUFBcUMsaUJBQXJDLEdBQUE7QUFFeEUsTUFBQSxjQUNDLENBQUMsS0FERixDQUNRLE9BRFIsRUFFRTtBQUFBLFFBQUEsR0FBQSxFQUFLLFFBQUw7QUFBQSxRQUNBLFdBQUEsRUFBYSxxQkFEYjtBQUFBLFFBRUEsVUFBQSxFQUFZLGlCQUZaO09BRkYsQ0FNQyxDQUFDLEtBTkYsQ0FNUSxRQU5SLEVBT0U7QUFBQSxRQUFBLEdBQUEsRUFBSyxTQUFMO09BUEYsQ0FTQyxDQUFDLEtBVEYsQ0FTUSxNQVRSLEVBVUU7QUFBQSxRQUFBLEdBQUEsRUFBSyxjQUFMO0FBQUEsUUFDQSxXQUFBLEVBQWEsb0JBRGI7QUFBQSxRQUVBLFVBQUEsRUFBWSxnQkFGWjtPQVZGLENBY0MsQ0FBQyxLQWRGLENBY1EsTUFkUixFQWVFO0FBQUEsUUFBQSxHQUFBLEVBQUssT0FBTDtBQUFBLFFBQ0EsV0FBQSxFQUFhLG9CQURiO0FBQUEsUUFFQSxVQUFBLEVBQVksZ0JBRlo7T0FmRixDQUFBLENBQUE7QUFBQSxNQW9CQSxrQkFBa0IsQ0FBQyxTQUFuQixDQUE2QixPQUE3QixDQXBCQSxDQUFBO2FBc0JBLGlCQUFpQixDQUFDLFNBQWxCLENBQTRCLElBQTVCLEVBeEJ3RTtJQUFBLENBQTlEO0dBQVgsQ0FIQSxDQUFBOztBQUFBLEVBK0JBLEdBQUcsQ0FBQyxHQUFKLENBQVE7SUFBQyxZQUFELEVBQWUsUUFBZixFQUF5QixNQUF6QixFQUFpQyxhQUFqQyxFQUFnRCxTQUFDLFVBQUQsRUFBYSxNQUFiLEVBQXFCLElBQXJCLEVBQTJCLElBQTNCLEdBQUE7YUFDdkQsVUFBVSxDQUFDLEdBQVgsQ0FBZSxtQkFBZixFQUFvQyxTQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLFFBQWpCLEVBQTJCLFNBQTNCLEVBQXNDLFVBQXRDLEdBQUE7QUFDbkMsUUFBQSxVQUFVLENBQUMsY0FBWCxHQUE0QixPQUFPLENBQUMsSUFBUixLQUFnQixNQUE1QyxDQUFBO0FBQUEsUUFDQSxJQUFJLENBQUMsSUFBTCxDQUFVLG9CQUFBLEdBQXFCLFNBQVMsQ0FBQyxJQUEvQixHQUFvQyxPQUFwQyxHQUEyQyxPQUFPLENBQUMsSUFBbkQsR0FBd0Qsb0JBQXhELEdBQTRFLFVBQVUsQ0FBQyxjQUFqRyxDQURBLENBQUE7QUFFQSxjQUFBLENBRkE7QUFHQSxRQUFBLElBQUcsT0FBTyxDQUFDLElBQVIsS0FBZ0IsT0FBbkI7QUFDQyxVQUFBLElBQUcsQ0FBQSxJQUFLLENBQUMsVUFBTCxDQUFBLENBQUo7QUFDQyxZQUFBLElBQUksQ0FBQyxJQUFMLENBQVUsMkNBQVYsQ0FBQSxDQUFBO0FBQUEsWUFDQSxLQUFLLENBQUMsY0FBTixDQUFBLENBREEsQ0FBQTtBQUFBLFlBRUEsTUFBTSxDQUFDLEVBQVAsQ0FBVSxPQUFWLENBRkEsQ0FERDtXQUFBO0FBS0EsVUFBQSxJQUFHLE9BQU8sQ0FBQyxJQUFSLEtBQWdCLFFBQW5CO0FBQ0MsWUFBQSxJQUFJLENBQUMsSUFBTCxDQUFVLHVCQUFWLENBQUEsQ0FBQTtBQUFBLFlBQ0EsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQURBLENBQUE7QUFBQSxZQUVBLEtBQUssQ0FBQyxjQUFOLENBQUEsQ0FGQSxDQUFBO21CQUdBLE1BQU0sQ0FBQyxFQUFQLENBQVUsT0FBVixFQUpEO1dBTkQ7U0FKbUM7TUFBQSxDQUFwQyxFQUR1RDtJQUFBLENBQWhEO0dBQVIsQ0EvQkEsQ0FBQTtBQUFBIiwiZmlsZSI6InJvdXRlcy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImFwcCA9IGFuZ3VsYXIubW9kdWxlKCdtb2VkaXQuQXBwJylcblxuIyByb3V0ZXNcbmFwcC5jb25maWcgWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIC0+XG5cblx0JHN0YXRlUHJvdmlkZXJcblx0XHQuc3RhdGUgJ2xvZ2luJyxcblx0XHRcdHVybDogXCIvbG9naW5cIlxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9sb2dpbi5odG1sJ1xuXHRcdFx0Y29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcidcblx0XHRcblx0XHQuc3RhdGUgJ2xvZ291dCcsXG5cdFx0XHR1cmw6IFwiL2xvZ291dFwiXG5cblx0XHQuc3RhdGUgJ2VkaXQnLFxuXHRcdFx0dXJsOiBcIi9lZGl0Lzpkb2NpZFwiXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2VkaXQuaHRtbCdcblx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0Q29udHJvbGxlcidcblxuXHRcdC5zdGF0ZSAnbGlzdCcsXG5cdFx0XHR1cmw6IFwiL2xpc3RcIlxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9saXN0Lmh0bWwnXG5cdFx0XHRjb250cm9sbGVyOiAnbGlzdENvbnRyb2xsZXInXG5cblxuXHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbGlzdCcpO1xuXG5cdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKVxuXVxuXG4jIHRha2Ugbm90IGxvZ2dlZCBpbiB1c2VyIHRvIGxvZ2luXG5hcHAucnVuIFsnJHJvb3RTY29wZScsICckc3RhdGUnLCAnJGxvZycsICdtb2VkaXQuQXV0aCcsICgkcm9vdFNjb3BlLCAkc3RhdGUsICRsb2csIEF1dGgpIC0+XG5cdCRyb290U2NvcGUuJG9uIFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSAtPlxuXHRcdCRyb290U2NvcGUuc2hvd0Z1bGxzY3JlZW4gPSB0b1N0YXRlLm5hbWUgPT0gJ2VkaXQnXG5cdFx0JGxvZy5pbmZvIFwic3RhdGVjaGFuZ2UgZnJvbTogI3tmcm9tU3RhdGUubmFtZX0gdG86ICN7dG9TdGF0ZS5uYW1lfSwgc2hvd0Z1bGxzY3JlZW46ICN7JHJvb3RTY29wZS5zaG93RnVsbHNjcmVlbn1cIlxuXHRcdHJldHVyblxuXHRcdGlmIHRvU3RhdGUubmFtZSAhPSAnbG9naW4nXG5cdFx0XHRpZiAhQXV0aC5pc0xvZ2dlZEluKClcblx0XHRcdFx0JGxvZy5pbmZvIFwibm90IGxvZ2dlZCBpbiBmb3IgdGhhdCBzdGF0ZS4gZ290byBsb2dpbi5cIlxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRcdCRzdGF0ZS5nbyAnbG9naW4nXG5cblx0XHRcdGlmIHRvU3RhdGUubmFtZSA9PSAnbG9nb3V0J1xuXHRcdFx0XHQkbG9nLmluZm8gXCJsb2dvdXQgYW5kIGdvdG8gbG9naW5cIlxuXHRcdFx0XHRBdXRoLmxvZ291dCgpXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0JHN0YXRlLmdvICdsb2dpbidcbl0iXX0=