(function() {
  var app;

  app = angular.module('moedit.App');

  app.config([
    '$stateProvider', '$urlRouterProvider', '$locationProvider', function($stateProvider, $urlRouterProvider, $locationProvider) {
      $stateProvider.state('login', {
        url: "/login",
        templateUrl: 'partials/login.html',
        controller: 'loginController'
      }).state('logout', {
        url: "/logout"
      }).state('edit', {
        url: "/edit/:docid",
        templateUrl: 'partials/edit.html',
        controller: 'editController'
      }).state('list', {
        url: "/list",
        templateUrl: 'partials/list.html',
        controller: 'listController'
      });
      $urlRouterProvider.otherwise('/list');
      return $locationProvider.html5Mode(true);
    }
  ]);

  app.run([
    '$rootScope', '$state', '$log', 'moedit.Auth', function($rootScope, $state, $log, Auth) {
      return $rootScope.$on("$stateChangeStart", function(event, toState, toParams, fromState, fromParams) {
        $rootScope.showFullscreen = toState.name === 'edit';
        $log.info("statechange from: " + fromState.name + " to: " + toState.name + ", showFullscreen: " + $rootScope.showFullscreen);
        return;
        if (toState.name !== 'login') {
          if (!Auth.isLoggedIn()) {
            $log.info("not logged in for that state. goto login.");
            event.preventDefault();
            $state.go('login');
          }
          if (toState.name === 'logout') {
            $log.info("logout and goto login");
            Auth.logout();
            event.preventDefault();
            return $state.go('login');
          }
        }
      });
    }
  ]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLEdBQUE7O0FBQUEsRUFBQSxHQUFBLEdBQU0sT0FBTyxDQUFDLE1BQVIsQ0FBZ0IsWUFBaEIsQ0FBTixDQUFBOztBQUFBLEVBR0EsR0FBRyxDQUFDLE1BQUosQ0FBVztJQUFFLGdCQUFGLEVBQW9CLG9CQUFwQixFQUEwQyxtQkFBMUMsRUFBOEQsU0FBQyxjQUFELEVBQWlCLGtCQUFqQixFQUFxQyxpQkFBckMsR0FBQTtBQUV4RSxNQUFBLGNBQ0MsQ0FBQyxLQURGLENBQ1MsT0FEVCxFQUVFO0FBQUEsUUFBQSxHQUFBLEVBQU0sUUFBTjtBQUFBLFFBQ0EsV0FBQSxFQUFjLHFCQURkO0FBQUEsUUFFQSxVQUFBLEVBQWEsaUJBRmI7T0FGRixDQU1DLENBQUMsS0FORixDQU1TLFFBTlQsRUFPRTtBQUFBLFFBQUEsR0FBQSxFQUFNLFNBQU47T0FQRixDQVNDLENBQUMsS0FURixDQVNTLE1BVFQsRUFVRTtBQUFBLFFBQUEsR0FBQSxFQUFNLGNBQU47QUFBQSxRQUNBLFdBQUEsRUFBYyxvQkFEZDtBQUFBLFFBRUEsVUFBQSxFQUFhLGdCQUZiO09BVkYsQ0FjQyxDQUFDLEtBZEYsQ0FjUyxNQWRULEVBZUU7QUFBQSxRQUFBLEdBQUEsRUFBTSxPQUFOO0FBQUEsUUFDQSxXQUFBLEVBQWMsb0JBRGQ7QUFBQSxRQUVBLFVBQUEsRUFBYSxnQkFGYjtPQWZGLENBQUEsQ0FBQTtBQUFBLE1Bb0JBLGtCQUFrQixDQUFDLFNBQW5CLENBQThCLE9BQTlCLENBcEJBLENBQUE7YUFzQkEsaUJBQWlCLENBQUMsU0FBbEIsQ0FBNEIsSUFBNUIsRUF4QndFO0lBQUEsQ0FBOUQ7R0FBWCxDQUhBLENBQUE7O0FBQUEsRUErQkEsR0FBRyxDQUFDLEdBQUosQ0FBUTtJQUFFLFlBQUYsRUFBZ0IsUUFBaEIsRUFBMEIsTUFBMUIsRUFBa0MsYUFBbEMsRUFBZ0QsU0FBQyxVQUFELEVBQWEsTUFBYixFQUFxQixJQUFyQixFQUEyQixJQUEzQixHQUFBO2FBQ3ZELFVBQVUsQ0FBQyxHQUFYLENBQWdCLG1CQUFoQixFQUFvQyxTQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLFFBQWpCLEVBQTJCLFNBQTNCLEVBQXNDLFVBQXRDLEdBQUE7QUFDbkMsUUFBQSxVQUFVLENBQUMsY0FBWCxHQUE0QixPQUFPLENBQUMsSUFBUixLQUFpQixNQUE3QyxDQUFBO0FBQUEsUUFDQSxJQUFJLENBQUMsSUFBTCxDQUFXLG9CQUFBLEdBQW9CLFNBQVMsQ0FBQyxJQUE5QixHQUFtQyxPQUFuQyxHQUEwQyxPQUFPLENBQUMsSUFBbEQsR0FBdUQsb0JBQXZELEdBQTJFLFVBQVUsQ0FBQyxjQUFqRyxDQURBLENBQUE7QUFFQSxjQUFBLENBRkE7QUFHQSxRQUFBLElBQUcsT0FBTyxDQUFDLElBQVIsS0FBaUIsT0FBcEI7QUFDQyxVQUFBLElBQUcsQ0FBQSxJQUFLLENBQUMsVUFBTCxDQUFBLENBQUo7QUFDQyxZQUFBLElBQUksQ0FBQyxJQUFMLENBQVcsMkNBQVgsQ0FBQSxDQUFBO0FBQUEsWUFDQSxLQUFLLENBQUMsY0FBTixDQUFBLENBREEsQ0FBQTtBQUFBLFlBRUEsTUFBTSxDQUFDLEVBQVAsQ0FBVyxPQUFYLENBRkEsQ0FERDtXQUFBO0FBS0EsVUFBQSxJQUFHLE9BQU8sQ0FBQyxJQUFSLEtBQWlCLFFBQXBCO0FBQ0MsWUFBQSxJQUFJLENBQUMsSUFBTCxDQUFXLHVCQUFYLENBQUEsQ0FBQTtBQUFBLFlBQ0EsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQURBLENBQUE7QUFBQSxZQUVBLEtBQUssQ0FBQyxjQUFOLENBQUEsQ0FGQSxDQUFBO21CQUdBLE1BQU0sQ0FBQyxFQUFQLENBQVcsT0FBWCxFQUpEO1dBTkQ7U0FKbUM7TUFBQSxDQUFwQyxFQUR1RDtJQUFBLENBQWhEO0dBQVIsQ0EvQkEsQ0FBQTtBQUFBIiwiZmlsZSI6InJvdXRlcy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImFwcCA9IGFuZ3VsYXIubW9kdWxlKCdtb2VkaXQuQXBwJylcclxuXHJcbiMgcm91dGVzXHJcbmFwcC5jb25maWcgWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIC0+XHJcblxyXG5cdCRzdGF0ZVByb3ZpZGVyXHJcblx0XHQuc3RhdGUgJ2xvZ2luJyxcclxuXHRcdFx0dXJsOiBcIi9sb2dpblwiXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvbG9naW4uaHRtbCdcclxuXHRcdFx0Y29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcidcclxuXHRcdFxyXG5cdFx0LnN0YXRlICdsb2dvdXQnLFxyXG5cdFx0XHR1cmw6IFwiL2xvZ291dFwiXHJcblxyXG5cdFx0LnN0YXRlICdlZGl0JyxcclxuXHRcdFx0dXJsOiBcIi9lZGl0Lzpkb2NpZFwiXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZWRpdC5odG1sJ1xyXG5cdFx0XHRjb250cm9sbGVyOiAnZWRpdENvbnRyb2xsZXInXHJcblxyXG5cdFx0LnN0YXRlICdsaXN0JyxcclxuXHRcdFx0dXJsOiBcIi9saXN0XCJcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9saXN0Lmh0bWwnXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdsaXN0Q29udHJvbGxlcidcclxuXHJcblxyXG5cdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9saXN0Jyk7XHJcblxyXG5cdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKVxyXG5dXHJcblxyXG4jIHRha2Ugbm90IGxvZ2dlZCBpbiB1c2VyIHRvIGxvZ2luXHJcbmFwcC5ydW4gWyckcm9vdFNjb3BlJywgJyRzdGF0ZScsICckbG9nJywgJ21vZWRpdC5BdXRoJywgKCRyb290U2NvcGUsICRzdGF0ZSwgJGxvZywgQXV0aCkgLT5cclxuXHQkcm9vdFNjb3BlLiRvbiBcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykgLT5cclxuXHRcdCRyb290U2NvcGUuc2hvd0Z1bGxzY3JlZW4gPSB0b1N0YXRlLm5hbWUgPT0gJ2VkaXQnXHJcblx0XHQkbG9nLmluZm8gXCJzdGF0ZWNoYW5nZSBmcm9tOiAje2Zyb21TdGF0ZS5uYW1lfSB0bzogI3t0b1N0YXRlLm5hbWV9LCBzaG93RnVsbHNjcmVlbjogI3skcm9vdFNjb3BlLnNob3dGdWxsc2NyZWVufVwiXHJcblx0XHRyZXR1cm5cclxuXHRcdGlmIHRvU3RhdGUubmFtZSAhPSAnbG9naW4nXHJcblx0XHRcdGlmICFBdXRoLmlzTG9nZ2VkSW4oKVxyXG5cdFx0XHRcdCRsb2cuaW5mbyBcIm5vdCBsb2dnZWQgaW4gZm9yIHRoYXQgc3RhdGUuIGdvdG8gbG9naW4uXCJcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblx0XHRcdFx0JHN0YXRlLmdvICdsb2dpbidcclxuXHJcblx0XHRcdGlmIHRvU3RhdGUubmFtZSA9PSAnbG9nb3V0J1xyXG5cdFx0XHRcdCRsb2cuaW5mbyBcImxvZ291dCBhbmQgZ290byBsb2dpblwiXHJcblx0XHRcdFx0QXV0aC5sb2dvdXQoKVxyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHRcdFx0XHQkc3RhdGUuZ28gJ2xvZ2luJ1xyXG5dIl19