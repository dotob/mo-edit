(function() {
  var controllers;

  controllers = angular.module('moedit.Controllers');

  controllers.controller('editController', [
    '$scope', '$log', '$q', '$state', '$stateParams', '$window', 'moedit.Socket', 'moedit.SweetAlert', 'moedit.Focus', 'moedit.Data', 'messageCenterService', function($scope, $log, $q, $state, $stateParams, $window, Socket, SweetAlert, Focus, Data, messageCenterService) {
      var autoSave, autoSaveCurrentDocument;
      autoSaveCurrentDocument = function() {
        $log.debug("autosave");
        return $scope.saveDocument($scope.currentDocument, "Automatisch gespeichert");
      };
      autoSave = _.debounce(autoSaveCurrentDocument, 5000);
      $scope.selectChapter = function(chapter) {
        var c, _i, _len, _ref;
        if ($scope.chapterWatch != null) {
          $scope.chapterWatch();
        }
        $log.info("select chapter " + chapter.title + ":" + chapter.selected);
        $log.debug(chapter.content);
        $scope.currentChapter = chapter;
        _ref = $scope.currentDocument.chapters;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          c = _ref[_i];
          if (c._id === chapter._id) {
            c.selected = true;
          } else {
            c.selected = false;
          }
        }
        return $scope.chapterWatch = $scope.$watch('currentChapter.content', function(val) {
<<<<<<< HEAD
          $scope.currentChapter.lastChanged = new Date();
          return console.log('changed');
=======
          $log.debug("changed");
          $scope.currentChapter.lastChanged = new Date();
          return autoSave();
>>>>>>> f093c4c02ddc6981e4d50025eaf82ee2ee3e5785
        });
      };
      $scope.newComment = function(chapter) {
        return SweetAlert.info('kommt noch');
      };
      $scope.newChapter = function(document) {
        return SweetAlert.info('kommt noch');
      };
      $scope.showPreview = function(document) {
        return $window.open("/preview/" + document._id);
      };
      $scope.downloadWord = function(document) {
        return $window.open("/download/word/" + document._id);
      };
<<<<<<< HEAD
      $scope.saveDocument = function(document) {
        console.log("save");
        console.dir(document);
        return Data.saveDocument(document);
      };
      return Data.documents().then(function(documents) {
        $scope.documents = documents;
        $scope.currentDocument = documents[0];
=======
      $scope.saveDocument = function(document, msg) {
        if (msg == null) {
          msg = "Gutachten erfolgreich gespeichert";
        }
        return Data.saveDocument(document).then(function(response) {
          if (response.status !== 200) {
            return messageCenterService.add('danger', msg, {
              html: true
            });
          } else {
            return messageCenterService.add('success', msg, {
              timeout: 2000,
              html: true
            });
          }
        });
      };
      return Data.document($stateParams.docid).then(function(document) {
        console.dir(document);
        $scope.currentDocument = document;
>>>>>>> f093c4c02ddc6981e4d50025eaf82ee2ee3e5785
        return $scope.selectChapter($scope.currentDocument.chapters[0]);
      });
    }
  ]);

}).call(this);

<<<<<<< HEAD
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2VkaXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSxXQUFBOztBQUFBLEVBQUEsV0FBQSxHQUFjLE9BQU8sQ0FBQyxNQUFSLENBQWdCLG9CQUFoQixDQUFkLENBQUE7O0FBQUEsRUFDQSxXQUFXLENBQUMsVUFBWixDQUF3QixnQkFBeEIsRUFBeUM7SUFDdkMsUUFEdUMsRUFFdkMsTUFGdUMsRUFHdkMsSUFIdUMsRUFJdkMsUUFKdUMsRUFLdkMsU0FMdUMsRUFNdkMsZUFOdUMsRUFPdkMsbUJBUHVDLEVBUXZDLGNBUnVDLEVBU3ZDLGFBVHVDLEVBVXhDLFNBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxFQUFmLEVBQW1CLE1BQW5CLEVBQTJCLE9BQTNCLEVBQW9DLE1BQXBDLEVBQTRDLFVBQTVDLEVBQXdELEtBQXhELEVBQStELElBQS9ELEdBQUE7QUFFQyxNQUFBLE1BQU0sQ0FBQyxhQUFQLEdBQXVCLFNBQUMsT0FBRCxHQUFBO0FBQ3RCLFlBQUEsaUJBQUE7QUFBQSxRQUFBLElBQUcsMkJBQUg7QUFDQyxVQUFBLE1BQU0sQ0FBQyxZQUFQLENBQUEsQ0FBQSxDQUREO1NBQUE7QUFBQSxRQUVBLElBQUksQ0FBQyxJQUFMLENBQVcsaUJBQUEsR0FBaUIsT0FBTyxDQUFDLEtBQXpCLEdBQStCLEdBQS9CLEdBQWtDLE9BQU8sQ0FBQyxRQUFyRCxDQUZBLENBQUE7QUFBQSxRQUdBLElBQUksQ0FBQyxLQUFMLENBQVcsT0FBTyxDQUFDLE9BQW5CLENBSEEsQ0FBQTtBQUFBLFFBSUEsTUFBTSxDQUFDLGNBQVAsR0FBd0IsT0FKeEIsQ0FBQTtBQUtBO0FBQUEsYUFBQSwyQ0FBQTt1QkFBQTtBQUNDLFVBQUEsSUFBRyxDQUFDLENBQUMsR0FBRixLQUFTLE9BQU8sQ0FBQyxHQUFwQjtBQUNDLFlBQUEsQ0FBQyxDQUFDLFFBQUYsR0FBYSxJQUFiLENBREQ7V0FBQSxNQUFBO0FBR0MsWUFBQSxDQUFDLENBQUMsUUFBRixHQUFhLEtBQWIsQ0FIRDtXQUREO0FBQUEsU0FMQTtlQVVBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLE1BQU0sQ0FBQyxNQUFQLENBQWUsd0JBQWYsRUFBd0MsU0FBQyxHQUFELEdBQUE7QUFDN0QsVUFBQSxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQXRCLEdBQXdDLElBQUEsSUFBQSxDQUFBLENBQXhDLENBQUE7aUJBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBYSxTQUFiLEVBRjZEO1FBQUEsQ0FBeEMsRUFYQTtNQUFBLENBQXZCLENBQUE7QUFBQSxNQWVBLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLFNBQUMsT0FBRCxHQUFBO2VBQ25CLFVBQVUsQ0FBQyxJQUFYLENBQWlCLFlBQWpCLEVBRG1CO01BQUEsQ0FmcEIsQ0FBQTtBQUFBLE1Ba0JBLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLFNBQUMsUUFBRCxHQUFBO2VBQ25CLFVBQVUsQ0FBQyxJQUFYLENBQWlCLFlBQWpCLEVBRG1CO01BQUEsQ0FsQnBCLENBQUE7QUFBQSxNQXFCQSxNQUFNLENBQUMsV0FBUCxHQUFxQixTQUFDLFFBQUQsR0FBQTtlQUNwQixPQUFPLENBQUMsSUFBUixDQUFjLFdBQUEsR0FBVyxRQUFRLENBQUMsR0FBbEMsRUFEb0I7TUFBQSxDQXJCckIsQ0FBQTtBQUFBLE1Bd0JBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLFNBQUMsUUFBRCxHQUFBO2VBQ3JCLE9BQU8sQ0FBQyxJQUFSLENBQWMsaUJBQUEsR0FBaUIsUUFBUSxDQUFDLEdBQXhDLEVBRHFCO01BQUEsQ0F4QnRCLENBQUE7QUFBQSxNQTJCQSxNQUFNLENBQUMsWUFBUCxHQUFzQixTQUFDLFFBQUQsR0FBQTtBQUNyQixRQUFBLE9BQU8sQ0FBQyxHQUFSLENBQWEsTUFBYixDQUFBLENBQUE7QUFBQSxRQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWixDQURBLENBQUE7ZUFFQSxJQUFJLENBQUMsWUFBTCxDQUFrQixRQUFsQixFQUhxQjtNQUFBLENBM0J0QixDQUFBO2FBZ0NBLElBQUksQ0FBQyxTQUFMLENBQUEsQ0FBZ0IsQ0FBQyxJQUFqQixDQUFzQixTQUFDLFNBQUQsR0FBQTtBQUNyQixRQUFBLE1BQU0sQ0FBQyxTQUFQLEdBQW1CLFNBQW5CLENBQUE7QUFBQSxRQUNBLE1BQU0sQ0FBQyxlQUFQLEdBQXlCLFNBQVUsQ0FBQSxDQUFBLENBRG5DLENBQUE7ZUFFQSxNQUFNLENBQUMsYUFBUCxDQUFxQixNQUFNLENBQUMsZUFBZSxDQUFDLFFBQVMsQ0FBQSxDQUFBLENBQXJELEVBSHFCO01BQUEsQ0FBdEIsRUFsQ0Q7SUFBQSxDQVZ3QztHQUF6QyxDQURBLENBQUE7QUFBQSIsImZpbGUiOiJjb250cm9sbGVycy9lZGl0LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiY29udHJvbGxlcnMgPSBhbmd1bGFyLm1vZHVsZSgnbW9lZGl0LkNvbnRyb2xsZXJzJylcbmNvbnRyb2xsZXJzLmNvbnRyb2xsZXIgJ2VkaXRDb250cm9sbGVyJywgW1xuXHQnJHNjb3BlJ1xuXHQnJGxvZydcblx0JyRxJ1xuXHQnJHN0YXRlJ1xuXHQnJHdpbmRvdydcblx0J21vZWRpdC5Tb2NrZXQnXG5cdCdtb2VkaXQuU3dlZXRBbGVydCdcblx0J21vZWRpdC5Gb2N1cydcblx0J21vZWRpdC5EYXRhJ1xuXHQoJHNjb3BlLCAkbG9nLCAkcSwgJHN0YXRlLCAkd2luZG93LCBTb2NrZXQsIFN3ZWV0QWxlcnQsIEZvY3VzLCBEYXRhKSAtPlxuXG5cdFx0JHNjb3BlLnNlbGVjdENoYXB0ZXIgPSAoY2hhcHRlcikgLT5cblx0XHRcdGlmICRzY29wZS5jaGFwdGVyV2F0Y2g/XG5cdFx0XHRcdCRzY29wZS5jaGFwdGVyV2F0Y2goKSAjIHJlbW92ZSB3YXRjaFxuXHRcdFx0JGxvZy5pbmZvIFwic2VsZWN0IGNoYXB0ZXIgI3tjaGFwdGVyLnRpdGxlfToje2NoYXB0ZXIuc2VsZWN0ZWR9XCJcblx0XHRcdCRsb2cuZGVidWcgY2hhcHRlci5jb250ZW50XG5cdFx0XHQkc2NvcGUuY3VycmVudENoYXB0ZXIgPSBjaGFwdGVyXG5cdFx0XHRmb3IgYyBpbiAkc2NvcGUuY3VycmVudERvY3VtZW50LmNoYXB0ZXJzXG5cdFx0XHRcdGlmIGMuX2lkID09IGNoYXB0ZXIuX2lkXG5cdFx0XHRcdFx0Yy5zZWxlY3RlZCA9IHRydWVcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGMuc2VsZWN0ZWQgPSBmYWxzZVxuXHRcdFx0JHNjb3BlLmNoYXB0ZXJXYXRjaCA9ICRzY29wZS4kd2F0Y2ggJ2N1cnJlbnRDaGFwdGVyLmNvbnRlbnQnLCAodmFsKSAtPlxuXHRcdFx0XHQkc2NvcGUuY3VycmVudENoYXB0ZXIubGFzdENoYW5nZWQgPSBuZXcgRGF0ZSgpXG5cdFx0XHRcdGNvbnNvbGUubG9nICdjaGFuZ2VkJ1xuXG5cdFx0JHNjb3BlLm5ld0NvbW1lbnQgPSAoY2hhcHRlcikgLT5cblx0XHRcdFN3ZWV0QWxlcnQuaW5mbyAna29tbXQgbm9jaCdcblxuXHRcdCRzY29wZS5uZXdDaGFwdGVyID0gKGRvY3VtZW50KSAtPlxuXHRcdFx0U3dlZXRBbGVydC5pbmZvICdrb21tdCBub2NoJ1xuXG5cdFx0JHNjb3BlLnNob3dQcmV2aWV3ID0gKGRvY3VtZW50KSAtPlxuXHRcdFx0JHdpbmRvdy5vcGVuIFwiL3ByZXZpZXcvI3tkb2N1bWVudC5faWR9XCJcblxuXHRcdCRzY29wZS5kb3dubG9hZFdvcmQgPSAoZG9jdW1lbnQpIC0+XG5cdFx0XHQkd2luZG93Lm9wZW4gXCIvZG93bmxvYWQvd29yZC8je2RvY3VtZW50Ll9pZH1cIlxuXG5cdFx0JHNjb3BlLnNhdmVEb2N1bWVudCA9IChkb2N1bWVudCkgLT5cblx0XHRcdGNvbnNvbGUubG9nIFwic2F2ZVwiXG5cdFx0XHRjb25zb2xlLmRpciBkb2N1bWVudFxuXHRcdFx0RGF0YS5zYXZlRG9jdW1lbnQoZG9jdW1lbnQpXG5cblx0XHREYXRhLmRvY3VtZW50cygpLnRoZW4gKGRvY3VtZW50cykgLT5cblx0XHRcdCRzY29wZS5kb2N1bWVudHMgPSBkb2N1bWVudHNcblx0XHRcdCRzY29wZS5jdXJyZW50RG9jdW1lbnQgPSBkb2N1bWVudHNbMF1cblx0XHRcdCRzY29wZS5zZWxlY3RDaGFwdGVyKCRzY29wZS5jdXJyZW50RG9jdW1lbnQuY2hhcHRlcnNbMF0pXG5cdFx0XHRcblxuXVxuIl19
=======
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2VkaXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSxXQUFBOztBQUFBLEVBQUEsV0FBQSxHQUFjLE9BQU8sQ0FBQyxNQUFSLENBQWdCLG9CQUFoQixDQUFkLENBQUE7O0FBQUEsRUFDQSxXQUFXLENBQUMsVUFBWixDQUF3QixnQkFBeEIsRUFBeUM7SUFDdkMsUUFEdUMsRUFFdkMsTUFGdUMsRUFHdkMsSUFIdUMsRUFJdkMsUUFKdUMsRUFLdkMsY0FMdUMsRUFNdkMsU0FOdUMsRUFPdkMsZUFQdUMsRUFRdkMsbUJBUnVDLEVBU3ZDLGNBVHVDLEVBVXZDLGFBVnVDLEVBV3ZDLHNCQVh1QyxFQVl4QyxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsRUFBZixFQUFtQixNQUFuQixFQUEyQixZQUEzQixFQUF5QyxPQUF6QyxFQUFrRCxNQUFsRCxFQUEwRCxVQUExRCxFQUFzRSxLQUF0RSxFQUE2RSxJQUE3RSxFQUFtRixvQkFBbkYsR0FBQTtBQUdDLFVBQUEsaUNBQUE7QUFBQSxNQUFBLHVCQUFBLEdBQTBCLFNBQUEsR0FBQTtBQUN6QixRQUFBLElBQUksQ0FBQyxLQUFMLENBQVksVUFBWixDQUFBLENBQUE7ZUFDQSxNQUFNLENBQUMsWUFBUCxDQUFvQixNQUFNLENBQUMsZUFBM0IsRUFBNkMseUJBQTdDLEVBRnlCO01BQUEsQ0FBMUIsQ0FBQTtBQUFBLE1BSUEsUUFBQSxHQUFXLENBQUMsQ0FBQyxRQUFGLENBQVcsdUJBQVgsRUFBb0MsSUFBcEMsQ0FKWCxDQUFBO0FBQUEsTUFNQSxNQUFNLENBQUMsYUFBUCxHQUF1QixTQUFDLE9BQUQsR0FBQTtBQUN0QixZQUFBLGlCQUFBO0FBQUEsUUFBQSxJQUFHLDJCQUFIO0FBQ0MsVUFBQSxNQUFNLENBQUMsWUFBUCxDQUFBLENBQUEsQ0FERDtTQUFBO0FBQUEsUUFFQSxJQUFJLENBQUMsSUFBTCxDQUFXLGlCQUFBLEdBQWlCLE9BQU8sQ0FBQyxLQUF6QixHQUEr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Iiwic291cmNlc0NvbnRlbnQiOlsiY29udHJvbGxlcnMgPSBhbmd1bGFyLm1vZHVsZSgnbW9lZGl0LkNvbnRyb2xsZXJzJylcclxuY29udHJvbGxlcnMuY29udHJvbGxlciAnZWRpdENvbnRyb2xsZXInLCBbXHJcblx0JyRzY29wZSdcclxuXHQnJGxvZydcclxuXHQnJHEnXHJcblx0JyRzdGF0ZSdcclxuXHQnJHN0YXRlUGFyYW1zJ1xyXG5cdCckd2luZG93J1xyXG5cdCdtb2VkaXQuU29ja2V0J1xyXG5cdCdtb2VkaXQuU3dlZXRBbGVydCdcclxuXHQnbW9lZGl0LkZvY3VzJ1xyXG5cdCdtb2VkaXQuRGF0YSdcclxuXHQnbWVzc2FnZUNlbnRlclNlcnZpY2UnXHJcblx0KCRzY29wZSwgJGxvZywgJHEsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkd2luZG93LCBTb2NrZXQsIFN3ZWV0QWxlcnQsIEZvY3VzLCBEYXRhLCBtZXNzYWdlQ2VudGVyU2VydmljZSkgLT5cclxuXHJcblx0XHQjIGF1dG9zYXZlXHJcblx0XHRhdXRvU2F2ZUN1cnJlbnREb2N1bWVudCA9ICgpIC0+XHJcblx0XHRcdCRsb2cuZGVidWcgXCJhdXRvc2F2ZVwiXHJcblx0XHRcdCRzY29wZS5zYXZlRG9jdW1lbnQoJHNjb3BlLmN1cnJlbnREb2N1bWVudCwgXCJBdXRvbWF0aXNjaCBnZXNwZWljaGVydFwiKVxyXG5cdFx0XHJcblx0XHRhdXRvU2F2ZSA9IF8uZGVib3VuY2UgYXV0b1NhdmVDdXJyZW50RG9jdW1lbnQsIDUwMDBcclxuXHJcblx0XHQkc2NvcGUuc2VsZWN0Q2hhcHRlciA9IChjaGFwdGVyKSAtPlxyXG5cdFx0XHRpZiAkc2NvcGUuY2hhcHRlcldhdGNoP1xyXG5cdFx0XHRcdCRzY29wZS5jaGFwdGVyV2F0Y2goKSAjIHJlbW92ZSB3YXRjaFxyXG5cdFx0XHQkbG9nLmluZm8gXCJzZWxlY3QgY2hhcHRlciAje2NoYXB0ZXIudGl0bGV9OiN7Y2hhcHRlci5zZWxlY3RlZH1cIlxyXG5cdFx0XHQkbG9nLmRlYnVnIGNoYXB0ZXIuY29udGVudFxyXG5cdFx0XHQkc2NvcGUuY3VycmVudENoYXB0ZXIgPSBjaGFwdGVyXHJcblx0XHRcdGZvciBjIGluICRzY29wZS5jdXJyZW50RG9jdW1lbnQuY2hhcHRlcnNcclxuXHRcdFx0XHRpZiBjLl9pZCA9PSBjaGFwdGVyLl9pZFxyXG5cdFx0XHRcdFx0Yy5zZWxlY3RlZCA9IHRydWVcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRjLnNlbGVjdGVkID0gZmFsc2VcclxuXHRcdFx0JHNjb3BlLmNoYXB0ZXJXYXRjaCA9ICRzY29wZS4kd2F0Y2ggJ2N1cnJlbnRDaGFwdGVyLmNvbnRlbnQnLCAodmFsKSAtPlxyXG5cdFx0XHRcdCRsb2cuZGVidWcgXCJjaGFuZ2VkXCJcclxuXHRcdFx0XHQkc2NvcGUuY3VycmVudENoYXB0ZXIubGFzdENoYW5nZWQgPSBuZXcgRGF0ZSgpXHJcblx0XHRcdFx0YXV0b1NhdmUoKVxyXG5cclxuXHRcdCRzY29wZS5uZXdDb21tZW50ID0gKGNoYXB0ZXIpIC0+XHJcblx0XHRcdFN3ZWV0QWxlcnQuaW5mbyAna29tbXQgbm9jaCdcclxuXHJcblx0XHQkc2NvcGUubmV3Q2hhcHRlciA9IChkb2N1bWVudCkgLT5cclxuXHRcdFx0U3dlZXRBbGVydC5pbmZvICdrb21tdCBub2NoJ1xyXG5cclxuXHRcdCRzY29wZS5zaG93UHJldmlldyA9IChkb2N1bWVudCkgLT5cclxuXHRcdFx0JHdpbmRvdy5vcGVuIFwiL3ByZXZpZXcvI3tkb2N1bWVudC5faWR9XCJcclxuXHJcblx0XHQkc2NvcGUuZG93bmxvYWRXb3JkID0gKGRvY3VtZW50KSAtPlxyXG5cdFx0XHQkd2luZG93Lm9wZW4gXCIvZG93bmxvYWQvd29yZC8je2RvY3VtZW50Ll9pZH1cIlxyXG5cclxuXHRcdCRzY29wZS5zYXZlRG9jdW1lbnQgPSAoZG9jdW1lbnQsIG1zZyA9IFwiR3V0YWNodGVuIGVyZm9sZ3JlaWNoIGdlc3BlaWNoZXJ0XCIpIC0+XHJcblx0XHRcdERhdGEuc2F2ZURvY3VtZW50KGRvY3VtZW50KS50aGVuIChyZXNwb25zZSkgLT5cclxuXHRcdFx0XHRpZiByZXNwb25zZS5zdGF0dXMgIT0gMjAwXHJcblx0XHRcdFx0XHRtZXNzYWdlQ2VudGVyU2VydmljZS5hZGQoJ2RhbmdlcicsIG1zZywge2h0bWw6IHRydWV9KTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRtZXNzYWdlQ2VudGVyU2VydmljZS5hZGQoJ3N1Y2Nlc3MnLCBtc2csIHt0aW1lb3V0OiAyMDAwLCBodG1sOiB0cnVlfSk7XHJcblxyXG5cdFx0RGF0YS5kb2N1bWVudCgkc3RhdGVQYXJhbXMuZG9jaWQpLnRoZW4gKGRvY3VtZW50KSAtPlxyXG5cdFx0XHRjb25zb2xlLmRpciBkb2N1bWVudFxyXG5cdFx0XHQkc2NvcGUuY3VycmVudERvY3VtZW50ID0gZG9jdW1lbnRcclxuXHRcdFx0JHNjb3BlLnNlbGVjdENoYXB0ZXIoJHNjb3BlLmN1cnJlbnREb2N1bWVudC5jaGFwdGVyc1swXSlcclxuXHRcdFx0XHJcblxyXG5dXHJcbiJdfQ==
>>>>>>> f093c4c02ddc6981e4d50025eaf82ee2ee3e5785
