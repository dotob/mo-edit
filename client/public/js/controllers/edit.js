(function() {
  var controllers;

  controllers = angular.module('moedit.Controllers');

  controllers.controller('editController', [
    '$scope', '$log', '$q', '$state', 'moedit.Socket', 'moedit.SweetAlert', 'moedit.Focus', 'moedit.Data', function($scope, $log, $q, $state, Socket, SweetAlert, Focus, Data) {
      $scope.selectChapter = function(chapter) {
        var c, _i, _len, _ref;
        if ($scope.chapterWatch != null) {
          $scope.chapterWatch();
        }
        $log.info("select chapter " + chapter.title + ":" + chapter.selected);
        $log.debug(chapter.content);
        $scope.currentChapter = chapter;
        _ref = $scope.currentDocument.chapters;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          c = _ref[_i];
          if (c._id === chapter._id) {
            c.selected = true;
          } else {
            c.selected = false;
          }
        }
        return $scope.chapterWatch = $scope.$watch('currentChapter.content', function(val) {
          return console.log('changed');
        });
      };
      $scope.newComment = function(chapter) {};
      $scope.newChapter = function(document) {};
      $scope.showPreview = function(document) {};
      $scope.downloadWord = function(document) {};
      return Data.documents().then(function(documents) {
        $scope.documents = documents;
        $scope.currentDocument = documents[0];
        return $scope.selectChapter($scope.currentDocument.chapters[0]);
      });
    }
  ]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2VkaXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSxXQUFBOztBQUFBLEVBQUEsV0FBQSxHQUFjLE9BQU8sQ0FBQyxNQUFSLENBQWdCLG9CQUFoQixDQUFkLENBQUE7O0FBQUEsRUFDQSxXQUFXLENBQUMsVUFBWixDQUF3QixnQkFBeEIsRUFBeUM7SUFDdkMsUUFEdUMsRUFFdkMsTUFGdUMsRUFHdkMsSUFIdUMsRUFJdkMsUUFKdUMsRUFLdkMsZUFMdUMsRUFNdkMsbUJBTnVDLEVBT3ZDLGNBUHVDLEVBUXZDLGFBUnVDLEVBU3hDLFNBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxFQUFmLEVBQW1CLE1BQW5CLEVBQTJCLE1BQTNCLEVBQW1DLFVBQW5DLEVBQStDLEtBQS9DLEVBQXNELElBQXRELEdBQUE7QUFFQyxNQUFBLE1BQU0sQ0FBQyxhQUFQLEdBQXVCLFNBQUMsT0FBRCxHQUFBO0FBQ3RCLFlBQUEsaUJBQUE7QUFBQSxRQUFBLElBQUcsMkJBQUg7QUFDQyxVQUFBLE1BQU0sQ0FBQyxZQUFQLENBQUEsQ0FBQSxDQUREO1NBQUE7QUFBQSxRQUVBLElBQUksQ0FBQyxJQUFMLENBQVcsaUJBQUEsR0FBaUIsT0FBTyxDQUFDLEtBQXpCLEdBQStCLEdBQS9CLEdBQWtDLE9BQU8sQ0FBQyxRQUFyRCxDQUZBLENBQUE7QUFBQSxRQUdBLElBQUksQ0FBQyxLQUFMLENBQVcsT0FBTyxDQUFDLE9BQW5CLENBSEEsQ0FBQTtBQUFBLFFBSUEsTUFBTSxDQUFDLGNBQVAsR0FBd0IsT0FKeEIsQ0FBQTtBQUtBO0FBQUEsYUFBQSwyQ0FBQTt1QkFBQTtBQUNDLFVBQUEsSUFBRyxDQUFDLENBQUMsR0FBRixLQUFTLE9BQU8sQ0FBQyxHQUFwQjtBQUNDLFlBQUEsQ0FBQyxDQUFDLFFBQUYsR0FBYSxJQUFiLENBREQ7V0FBQSxNQUFBO0FBR0MsWUFBQSxDQUFDLENBQUMsUUFBRixHQUFhLEtBQWIsQ0FIRDtXQUREO0FBQUEsU0FMQTtlQVVBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLE1BQU0sQ0FBQyxNQUFQLENBQWUsd0JBQWYsRUFBd0MsU0FBQyxHQUFELEdBQUE7aUJBQzdELE9BQU8sQ0FBQyxHQUFSLENBQWEsU0FBYixFQUQ2RDtRQUFBLENBQXhDLEVBWEE7TUFBQSxDQUF2QixDQUFBO0FBQUEsTUFjQSxNQUFNLENBQUMsVUFBUCxHQUFvQixTQUFDLE9BQUQsR0FBQSxDQWRwQixDQUFBO0FBQUEsTUFnQkEsTUFBTSxDQUFDLFVBQVAsR0FBb0IsU0FBQyxRQUFELEdBQUEsQ0FoQnBCLENBQUE7QUFBQSxNQWtCQSxNQUFNLENBQUMsV0FBUCxHQUFxQixTQUFDLFFBQUQsR0FBQSxDQWxCckIsQ0FBQTtBQUFBLE1Bb0JBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLFNBQUMsUUFBRCxHQUFBLENBcEJ0QixDQUFBO2FBdUJBLElBQUksQ0FBQyxTQUFMLENBQUEsQ0FBZ0IsQ0FBQyxJQUFqQixDQUFzQixTQUFDLFNBQUQsR0FBQTtBQUNyQixRQUFBLE1BQU0sQ0FBQyxTQUFQLEdBQW1CLFNBQW5CLENBQUE7QUFBQSxRQUNBLE1BQU0sQ0FBQyxlQUFQLEdBQXlCLFNBQVUsQ0FBQSxDQUFBLENBRG5DLENBQUE7ZUFFQSxNQUFNLENBQUMsYUFBUCxDQUFxQixNQUFNLENBQUMsZUFBZSxDQUFDLFFBQVMsQ0FBQSxDQUFBLENBQXJELEVBSHFCO01BQUEsQ0FBdEIsRUF6QkQ7SUFBQSxDQVR3QztHQUF6QyxDQURBLENBQUE7QUFBQSIsImZpbGUiOiJjb250cm9sbGVycy9lZGl0LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiY29udHJvbGxlcnMgPSBhbmd1bGFyLm1vZHVsZSgnbW9lZGl0LkNvbnRyb2xsZXJzJylcclxuY29udHJvbGxlcnMuY29udHJvbGxlciAnZWRpdENvbnRyb2xsZXInLCBbXHJcblx0JyRzY29wZSdcclxuXHQnJGxvZydcclxuXHQnJHEnXHJcblx0JyRzdGF0ZSdcclxuXHQnbW9lZGl0LlNvY2tldCdcclxuXHQnbW9lZGl0LlN3ZWV0QWxlcnQnXHJcblx0J21vZWRpdC5Gb2N1cydcclxuXHQnbW9lZGl0LkRhdGEnXHJcblx0KCRzY29wZSwgJGxvZywgJHEsICRzdGF0ZSwgU29ja2V0LCBTd2VldEFsZXJ0LCBGb2N1cywgRGF0YSkgLT5cclxuXHJcblx0XHQkc2NvcGUuc2VsZWN0Q2hhcHRlciA9IChjaGFwdGVyKSAtPlxyXG5cdFx0XHRpZiAkc2NvcGUuY2hhcHRlcldhdGNoP1xyXG5cdFx0XHRcdCRzY29wZS5jaGFwdGVyV2F0Y2goKSAjIHJlbW92ZSB3YXRjaFxyXG5cdFx0XHQkbG9nLmluZm8gXCJzZWxlY3QgY2hhcHRlciAje2NoYXB0ZXIudGl0bGV9OiN7Y2hhcHRlci5zZWxlY3RlZH1cIlxyXG5cdFx0XHQkbG9nLmRlYnVnIGNoYXB0ZXIuY29udGVudFxyXG5cdFx0XHQkc2NvcGUuY3VycmVudENoYXB0ZXIgPSBjaGFwdGVyXHJcblx0XHRcdGZvciBjIGluICRzY29wZS5jdXJyZW50RG9jdW1lbnQuY2hhcHRlcnNcclxuXHRcdFx0XHRpZiBjLl9pZCA9PSBjaGFwdGVyLl9pZFxyXG5cdFx0XHRcdFx0Yy5zZWxlY3RlZCA9IHRydWVcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRjLnNlbGVjdGVkID0gZmFsc2VcclxuXHRcdFx0JHNjb3BlLmNoYXB0ZXJXYXRjaCA9ICRzY29wZS4kd2F0Y2ggJ2N1cnJlbnRDaGFwdGVyLmNvbnRlbnQnLCAodmFsKSAtPlxyXG5cdFx0XHRcdGNvbnNvbGUubG9nICdjaGFuZ2VkJ1xyXG5cclxuXHRcdCRzY29wZS5uZXdDb21tZW50ID0gKGNoYXB0ZXIpIC0+XHJcblx0XHRcdCMgVE9ET1xyXG5cdFx0JHNjb3BlLm5ld0NoYXB0ZXIgPSAoZG9jdW1lbnQpIC0+XHJcblx0XHRcdCMgVE9ET1xyXG5cdFx0JHNjb3BlLnNob3dQcmV2aWV3ID0gKGRvY3VtZW50KSAtPlxyXG5cdFx0XHQjIFRPRE86IGdvdG8gL3ByZXZpZXcvOmRvY2lkXHJcblx0XHQkc2NvcGUuZG93bmxvYWRXb3JkID0gKGRvY3VtZW50KSAtPlxyXG5cdFx0XHQjIFRPRE86IGdvdG8gL2Rvd25sb2FkLzpkb2NpZFxyXG5cclxuXHRcdERhdGEuZG9jdW1lbnRzKCkudGhlbiAoZG9jdW1lbnRzKSAtPlxyXG5cdFx0XHQkc2NvcGUuZG9jdW1lbnRzID0gZG9jdW1lbnRzXHJcblx0XHRcdCRzY29wZS5jdXJyZW50RG9jdW1lbnQgPSBkb2N1bWVudHNbMF1cclxuXHRcdFx0JHNjb3BlLnNlbGVjdENoYXB0ZXIoJHNjb3BlLmN1cnJlbnREb2N1bWVudC5jaGFwdGVyc1swXSlcclxuXHRcdFx0XHJcblxyXG5dXHJcbiJdfQ==