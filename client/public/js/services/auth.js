(function() {
  angular.module("moedit.Services").factory("moedit.Auth", [
    '$rootScope', 'ipCookie', '$log', function($rootScope, ipCookie, $log) {
      var self;
      self = {
        login: function(username, password) {
          var authCookie, success;
          $log.debug("login user: " + username + ", password: " + password);
          authCookie = ipCookie(cookieKey);
          $log.debug("login user: auth cookie is " + (JSON.stringify(authCookie)));
          $log.debug("received login response: " + (JSON.stringify(loginData)));
          success = true;
          if (success) {
            $rootScope.user = {
              name: username,
              sessionToken: password
            };
            ipCookie(cookieKey, $rootScope.user, cookieOptions);
            return $rootScope.userLoggedIn = true;
          }
        },
        logout: function() {
          $rootScope.user = null;
          $rootScope.userLoggedIn = false;
          return ipCookie.remove(cookieKey);
        },
        isLoggedIn: function() {
          var authCookie, fake;
          authCookie = ipCookie(cookieKey);
          $log.info("isLoggedIn: auth cookie is " + (JSON.stringify(authCookie)));
          fake = false;
          if (fake) {
            this.login("John Doe", "secret");
            $rootScope.userLoggedIn = true;
          }
          $log.info("isLoggedIn: $rootScope.userLoggedIn is " + $rootScope.userLoggedIn);
          return $rootScope.userLoggedIn;
        }
      };
      return self;
    }
  ]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL2F1dGguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsRUFBQSxPQUFPLENBQUMsTUFBUixDQUFnQixpQkFBaEIsQ0FBaUMsQ0FBQyxPQUFsQyxDQUEyQyxhQUEzQyxFQUF5RDtJQUN2RCxZQUR1RCxFQUV2RCxVQUZ1RCxFQUd2RCxNQUh1RCxFQUl4RCxTQUFDLFVBQUQsRUFBYSxRQUFiLEVBQXVCLElBQXZCLEdBQUE7QUFFQyxVQUFBLElBQUE7QUFBQSxNQUFBLElBQUEsR0FDQztBQUFBLFFBQUEsS0FBQSxFQUFPLFNBQUMsUUFBRCxFQUFXLFFBQVgsR0FBQTtBQUNOLGNBQUEsbUJBQUE7QUFBQSxVQUFBLElBQUksQ0FBQyxLQUFMLENBQVksY0FBQSxHQUFjLFFBQWQsR0FBdUIsY0FBdkIsR0FBcUMsUUFBakQsQ0FBQSxDQUFBO0FBQUEsVUFDQSxVQUFBLEdBQWEsUUFBQSxDQUFTLFNBQVQsQ0FEYixDQUFBO0FBQUEsVUFFQSxJQUFJLENBQUMsS0FBTCxDQUFZLDZCQUFBLEdBQTRCLENBQUMsSUFBSSxDQUFDLFNBQUwsQ0FBZSxVQUFmLENBQUQsQ0FBeEMsQ0FGQSxDQUFBO0FBQUEsVUFLQSxJQUFJLENBQUMsS0FBTCxDQUFZLDJCQUFBLEdBQTBCLENBQUMsSUFBSSxDQUFDLFNBQUwsQ0FBZSxTQUFmLENBQUQsQ0FBdEMsQ0FMQSxDQUFBO0FBQUEsVUFNQSxPQUFBLEdBQVUsSUFOVixDQUFBO0FBT0EsVUFBQSxJQUFHLE9BQUg7QUFDQyxZQUFBLFVBQVUsQ0FBQyxJQUFYLEdBQ0M7QUFBQSxjQUFBLElBQUEsRUFBTSxRQUFOO0FBQUEsY0FDQSxZQUFBLEVBQWMsUUFEZDthQURELENBQUE7QUFBQSxZQUtBLFFBQUEsQ0FBUyxTQUFULEVBQW9CLFVBQVUsQ0FBQyxJQUEvQixFQUFxQyxhQUFyQyxDQUxBLENBQUE7bUJBTUEsVUFBVSxDQUFDLFlBQVgsR0FBMEIsS0FQM0I7V0FSTTtRQUFBLENBQVA7QUFBQSxRQWlCQSxNQUFBLEVBQVEsU0FBQSxHQUFBO0FBQ1AsVUFBQSxVQUFVLENBQUMsSUFBWCxHQUFrQixJQUFsQixDQUFBO0FBQUEsVUFDQSxVQUFVLENBQUMsWUFBWCxHQUEwQixLQUQxQixDQUFBO2lCQUVBLFFBQVEsQ0FBQyxNQUFULENBQWdCLFNBQWhCLEVBSE87UUFBQSxDQWpCUjtBQUFBLFFBc0JBLFVBQUEsRUFBWSxTQUFBLEdBQUE7QUFDWCxjQUFBLGdCQUFBO0FBQUEsVUFBQSxVQUFBLEdBQWEsUUFBQSxDQUFTLFNBQVQsQ0FBYixDQUFBO0FBQUEsVUFDQSxJQUFJLENBQUMsSUFBTCxDQUFXLDZCQUFBLEdBQTRCLENBQUMsSUFBSSxDQUFDLFNBQUwsQ0FBZSxVQUFmLENBQUQsQ0FBdkMsQ0FEQSxDQUFBO0FBQUEsVUFFQSxJQUFBLEdBQU8sS0FGUCxDQUFBO0FBR0EsVUFBQSxJQUFHLElBQUg7QUFDQyxZQUFBLElBQUMsQ0FBQSxLQUFELENBQVEsVUFBUixFQUFvQixRQUFwQixDQUFBLENBQUE7QUFBQSxZQUNBLFVBQVUsQ0FBQyxZQUFYLEdBQTBCLElBRDFCLENBREQ7V0FIQTtBQUFBLFVBT0EsSUFBSSxDQUFDLElBQUwsQ0FBVyx5Q0FBQSxHQUF5QyxVQUFVLENBQUMsWUFBL0QsQ0FQQSxDQUFBO2lCQVFBLFVBQVUsQ0FBQyxhQVRBO1FBQUEsQ0F0Qlo7T0FERCxDQUFBO2FBa0NBLEtBcENEO0lBQUEsQ0FKd0Q7R0FBekQsQ0FBQSxDQUFBO0FBQUEiLCJmaWxlIjoic2VydmljZXMvYXV0aC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKFwibW9lZGl0LlNlcnZpY2VzXCIpLmZhY3RvcnkgXCJtb2VkaXQuQXV0aFwiLCBbIFxyXG5cdCckcm9vdFNjb3BlJ1xyXG5cdCdpcENvb2tpZSdcclxuXHQnJGxvZydcclxuXHQoJHJvb3RTY29wZSwgaXBDb29raWUsICRsb2cpIC0+XHJcblxyXG5cdFx0c2VsZiA9XHJcblx0XHRcdGxvZ2luOiAodXNlcm5hbWUsIHBhc3N3b3JkKSAtPlxyXG5cdFx0XHRcdCRsb2cuZGVidWcgXCJsb2dpbiB1c2VyOiAje3VzZXJuYW1lfSwgcGFzc3dvcmQ6ICN7cGFzc3dvcmR9XCJcclxuXHRcdFx0XHRhdXRoQ29va2llID0gaXBDb29raWUgY29va2llS2V5XHJcblx0XHRcdFx0JGxvZy5kZWJ1ZyBcImxvZ2luIHVzZXI6IGF1dGggY29va2llIGlzICN7SlNPTi5zdHJpbmdpZnkoYXV0aENvb2tpZSl9XCJcclxuXHJcblx0XHRcdFx0IyBhc2sgc2VydmVyXHJcblx0XHRcdFx0JGxvZy5kZWJ1ZyBcInJlY2VpdmVkIGxvZ2luIHJlc3BvbnNlOiAje0pTT04uc3RyaW5naWZ5KGxvZ2luRGF0YSl9XCJcclxuXHRcdFx0XHRzdWNjZXNzID0gdHJ1ZSAjIFRPRE9cclxuXHRcdFx0XHRpZiBzdWNjZXNzXHJcblx0XHRcdFx0XHQkcm9vdFNjb3BlLnVzZXIgPVxyXG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VybmFtZVxyXG5cdFx0XHRcdFx0XHRzZXNzaW9uVG9rZW46IHBhc3N3b3JkICMgVE9ETzogY2hhbmdlIHRoaXNcclxuXHJcblx0XHRcdFx0XHQjIHNldCBjb29raWVcclxuXHRcdFx0XHRcdGlwQ29va2llIGNvb2tpZUtleSwgJHJvb3RTY29wZS51c2VyLCBjb29raWVPcHRpb25zXHJcblx0XHRcdFx0XHQkcm9vdFNjb3BlLnVzZXJMb2dnZWRJbiA9IHRydWVcclxuXHJcblx0XHRcdGxvZ291dDogLT5cclxuXHRcdFx0XHQkcm9vdFNjb3BlLnVzZXIgPSBudWxsXHJcblx0XHRcdFx0JHJvb3RTY29wZS51c2VyTG9nZ2VkSW4gPSBmYWxzZVxyXG5cdFx0XHRcdGlwQ29va2llLnJlbW92ZSBjb29raWVLZXlcclxuXHJcblx0XHRcdGlzTG9nZ2VkSW46IC0+XHJcblx0XHRcdFx0YXV0aENvb2tpZSA9IGlwQ29va2llIGNvb2tpZUtleVxyXG5cdFx0XHRcdCRsb2cuaW5mbyBcImlzTG9nZ2VkSW46IGF1dGggY29va2llIGlzICN7SlNPTi5zdHJpbmdpZnkoYXV0aENvb2tpZSl9XCJcclxuXHRcdFx0XHRmYWtlID0gZmFsc2VcclxuXHRcdFx0XHRpZiBmYWtlXHJcblx0XHRcdFx0XHRAbG9naW4gXCJKb2huIERvZVwiLCBcInNlY3JldFwiXHJcblx0XHRcdFx0XHQkcm9vdFNjb3BlLnVzZXJMb2dnZWRJbiA9IHRydWVcclxuXHJcblx0XHRcdFx0JGxvZy5pbmZvIFwiaXNMb2dnZWRJbjogJHJvb3RTY29wZS51c2VyTG9nZ2VkSW4gaXMgI3skcm9vdFNjb3BlLnVzZXJMb2dnZWRJbn1cIlxyXG5cdFx0XHRcdCRyb290U2NvcGUudXNlckxvZ2dlZEluXHJcblxyXG5cdFx0c2VsZlxyXG5dIl19